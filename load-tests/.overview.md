# Load Testing Suite Overview

## ğŸ“ Files Created

This load testing suite consists of the following files:

### ğŸ§ª Test Scripts
1. **`01-smoke-test.js`** - Basic functionality verification (4 min, 1 user)
2. **`02-average-load-test.js`** - Normal traffic simulation (19 min, 10-20 users)  
3. **`03-stress-test.js`** - High load testing (38 min, 50-100 users)
4. **`04-spike-test.js`** - Traffic surge simulation (16 min, 10-200 users)
5. **`05-breakpoint-test.js`** - Capacity limit finding (48 min, 25-1000 users)
6. **`06-soak-test.js`** - Long-term stability testing (7+ hours, 30-50 users)

### ğŸ”§ Utilities
7. **`run-tests.sh`** - Automated test runner script with IP discovery
8. **`README.md`** - Comprehensive documentation and usage guide
9. **`.overview.md`** - This overview file

## ğŸš€ Quick Start

1. **Ensure k6 is installed**: `k6 version`
2. **Get your AKS LoadBalancer IP**: `kubectl get service api-gateway -o jsonpath='{.status.loadBalancer.ingress[0].ip}'`
3. **Run tests**: `./run-tests.sh smoke` (or see options below)

## ğŸ¯ Test Types by Use Case

| Use Case | Test Type | Command | Duration |
|----------|-----------|---------|----------|
| **Deployment Validation** | Smoke | `./run-tests.sh smoke` | 4 min |
| **Performance Baseline** | Average Load | `./run-tests.sh average` | 19 min |
| **Stability Under Load** | Stress | `./run-tests.sh stress` | 38 min |
| **Auto-scaling Validation** | Spike | `./run-tests.sh spike` | 16 min |
| **Capacity Planning** | Breakpoint | `./run-tests.sh breakpoint` | 48 min |
| **Production Readiness** | Soak | `./run-tests.sh soak` | 7+ hours |
| **Full Validation** | All Tests | `./run-tests.sh all` | 8+ hours |
| **Recommended Suite** | Core Tests | `./run-tests.sh suite` | ~1 hour |

## ğŸ“Š Test Coverage

Each test covers these API endpoints:
- âœ… Health checks (`/health`, `/health/services`)
- âœ… Feed operations (`/api/feed`, `/api/feed/{id}`)
- âœ… Post creation (`/api/posts`)
- âœ… Profile operations (`/api/profiles/*`)

## ğŸ” Key Features

### Smart Test Runner (`run-tests.sh`)
- ğŸ” **Auto-discovery**: Automatically finds your AKS LoadBalancer IP
- ğŸ›¡ï¸ **Health checks**: Verifies system health before testing
- ğŸ“ **Result management**: Organizes test results with timestamps
- ğŸ”„ **File management**: Backs up and restores test files
- ğŸ“Š **Summary reports**: Generates test summaries and next steps

### Realistic Load Patterns
- ğŸ‘¥ **User behavior simulation**: Different user types (casual, active, power users)
- ğŸ“ˆ **Progressive load increases**: Gradual ramp-up to avoid false failures
- ğŸ² **Randomized content**: Realistic test data generation
- â±ï¸ **Adaptive timing**: Context-aware sleep intervals

### Comprehensive Metrics
- ğŸ“ˆ **Standard metrics**: Response times, error rates, throughput
- ğŸ”¬ **Custom metrics**: Posts created, feed reads, resource exhaustion
- ğŸ¯ **Smart thresholds**: Test-appropriate success criteria
- ğŸ“Š **Detailed reporting**: JSON output for analysis tools

## ğŸ› ï¸ Integration Options

### CI/CD Pipeline
```yaml
# GitHub Actions example (in README.md)
- name: Load Test
  run: |
    cd k8s/load-tests
    ./run-tests.sh smoke
```

### Monitoring Integration
- **Prometheus**: Metrics collection during tests
- **Grafana**: Real-time dashboard visualization  
- **Azure Monitor**: AKS cluster monitoring
- **Application Insights**: Application performance monitoring

## ğŸ“‹ Prerequisites Checklist

- [ ] k6 installed (`brew install k6` / `choco install k6`)
- [ ] kubectl configured for your AKS cluster
- [ ] API Gateway deployed and LoadBalancer accessible
- [ ] Basic health endpoint responding (`/health`)

## ğŸ“ Learning Path

1. **Start Here**: Read the full `README.md`
2. **First Test**: Run `./run-tests.sh smoke`
3. **Understand Metrics**: Analyze the JSON output
4. **Build Baselines**: Run `./run-tests.sh suite`
5. **Plan Capacity**: Run `./run-tests.sh breakpoint`
6. **Validate Production**: Run `./run-tests.sh soak`

## ğŸŒŸ Benefits

âœ… **Production Ready**: Based on industry best practices  
âœ… **Comprehensive**: Covers all major failure modes  
âœ… **Automated**: One-command execution with IP discovery  
âœ… **Documented**: Extensive guides and examples  
âœ… **Realistic**: Simulates actual user behavior patterns  
âœ… **Scalable**: Works from development to production loads  

---

**Start testing**: `./run-tests.sh smoke` ğŸš€ 